<!DOCTYPE html>
<html>
<head>
    <title>Jenn's Movie Database API</title>
    <meta charset="utf-8" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <style>


        body {
            margin: auto;
            padding: 0;
            background-color: #FAFAFA;
        }

        .card{
            width:350px;
            margin: auto;
            margin-left: 10px;
            margin-right: 10px;
            margin-top: 60px;
        }

        .alert{
            width: 95%;
            margin: auto;
            font-size: 12px;
        }

        .btn{
            margin-top: -5px;
            margin-left: 5px;
        }

        img{
            width:300px;
            margin-top: 100px;
            margin-left: 50px;
            margin-right: 50px;
            margin-bottom:20px;
            border: 2px solid black;
        }

        #display {
            text-align: center;
            margin-left: 100px;
        }

        #displaybuttons {
            text-align: center;
            margin-top: 220px;
        }

        #displaybuttons .btn {
                margin-left: -250px;
                margin-bottom: 50px;
                margin-right: 40px;
                height: 80px;
                width: 150px;
        }

        #overview {
            text-align: center;
            margin-left: 100px;
        }

        #details {
            text-align: center;
            margin-top: -100px;
        }

        footer{
            margin-top: 100px;
        }



    </style>

</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="#">Jenn's Movie Database API</a>
        <div class="navbar-nav">
            <a class="nav-item nav-link active" href="#">Home <span class="sr-only">(current)</span></a>
            <a class="nav-item nav-link" href="discover.html">Discover</a>
            <a class="nav-item nav-link " href="about.html">About</a>
        </div>
    </nav>
    <div class="container">
        <div class="row">
            <div class="col-xs">
                <div class="card text-center">
                    <h5 class="card-header">Search Movies</h5>
                    <div class="card-body">
                        <p class="card-text">
                            <input placeholder="La La Land" id="txtSearch" type="text" />
                            <input id="btnSearch" value="Search" type="button" class="btn btn-info" />
                            <div id="alertMovie"></div>

                        </p>
                    </div>
                </div>
            </div>

            <div class="col-xs">
                <div class="card text-center">
                    <h5 class="card-header">Search TV Shows</h5>
                    <div class="card-body">
                        <p class="card-text">
                            <input placeholder="Glee" id="txtSearchTV" type="text" />
                            <input id="btnSearchTV" value="Search" type="button" class="btn btn-info" />
                            <div id="alertTV"></div>
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-xs">
                <div class="card text-center">
                    <h5 class="card-header">Search People</h5>
                    <div class="card-body">
                        <p class="card-text">
                            <input placeholder="Saoirse Ronan" id="txtSearchPeople" type="text" />
                            <input id="btnSearchPeople" value="Search" type="button" class="btn btn-info" />
                            <div id="alertPeople"></div>
                        </p>
                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col-sm">
                <div id="display"></div>
                <div id="overview"></div>
            </div>
            <div class="col-xl">
                <div id="displaybuttons"></div>
                <div id="details"></div>
            </div>
        </div>
    </div>
    <!-- Footer -->
    <footer class="page-footer font-small blue pt-4">

        <div class="footer-copyright text-center py-3">
            © 2020 API Source:
            <a href="https://www.themoviedb.org/"> The Movie Database (TMDb)</a>
        </div>
        <!-- Copyright -->

    </footer>
    <!-- Footer -->


    <script>$(document).ready(function () {

            var movieID;
            var tvID;
            var personID;

            var i;

            $("#btnSearch").click(function () {
                $("#display").html("");
                $("#displaybuttons").html("");

                $("#overview").html("");
                $("#details").html("");
                var i = 0;
                var search = $("#txtSearch").val();
                var strURL = "https://api.themoviedb.org/3/search/movie?api_key=fe2b5b11a4f739b76be85963eb9fd15d&language=en-US&query=" + search;

                $.ajax({
                    type: "GET",
                    url: strURL,
                    dataType: "json",
                    success: function getMovie(data) {

                        $("#alertMovie").html("");
                        $("#alertTV").html("");
                        $("#alertPeople").html("");
                        var movie = "<h5>" + data.results[i].title + " (" + data.results[i].release_date.substring(0, 4) + ") </h5>";

                        if (data.results[i].poster_path == null) {
                            var imageURL = "https://underscoremusic.co.uk/site/wp-content/uploads/2014/05/no-poster.jpg";
                        } else {
                            var imageURL = "https://image.tmdb.org/t/p/w1280" + data.results[i].poster_path;
                        }

                        var image = document.createElement("IMG");
                        image.src = imageURL;
                        image.alt = "No Poster Available";
                        image.class = "bd-placeholder-img card-img-top";
                        var buttonNext = $('<input/>').attr({ type: 'button', id: 'btnNext', value: 'Next Movie', class: "btn btn-info" });
                        var buttonSelect = $('<input/>').attr({ type: 'button', id: 'btnViewMovieDetails', value: 'View Details', class: "btn btn-info" });
                        buttonNext.click(function () {
                            i++;
                            $("#display").html("");
                            $("#displaybuttons").html("");
                            getMovie(data);
                        });

                        buttonSelect.click(function () {
                            movieID = data.results[i].id;
                            var strURL = "https://api.themoviedb.org/3/movie/" + movieID + "?api_key=fe2b5b11a4f739b76be85963eb9fd15d&language=en-US";

                            $.ajax({
                                type: "GET",
                                url: strURL,
                                dataType: "json",
                                success: function (data) {
                                    var movie = "<h5>" + data.original_title + " (" + data.release_date.substring(0, 4) + ")</h5>";

                                    if (data.poster_path == null) {
                                        var imageURL = "https://underscoremusic.co.uk/site/wp-content/uploads/2014/05/no-poster.jpg";
                                    } else {
                                        var imageURL = "https://image.tmdb.org/t/p/w1280" + data.poster_path;
                                    }

                                    var image = document.createElement("IMG");
                                    image.src = imageURL;
                                    image.alt = "No Poster Available";
                                    image.class = "bd-placeholder-img card-img-top";

                                    var description = data.overview;
                                    var genres = "<br><br><b>Genres:</b> ";
                                    var i;
                                    for (i = 0; i < data.genres.length; i++) {
                                        if (i == data.genres.length - 1) {
                                            genres += data.genres[i].name;
                                        } else {
                                            genres += data.genres[i].name + ", ";
                                        }

                                    }

                                    var rating = "Average Rating: " + data.vote_average + " out of 10";


                                    $("#display").html("");
                                    $("#displaybuttons").html("");
                                    $("#overview").append(image);
                                    $("#overview").append('<br>');
                                    $("#overview").append(movie);
                                    $("#details").append(rating);
                                    $("#details").append('<br>');
                                    $("#details").append('<br>');
                                    $("#details").append(description);
                                    $("#details").append(genres);
                                    $("#details").append('<br>');

                                    strURL = "https://api.themoviedb.org/3/movie/" + movieID + "/credits?api_key=fe2b5b11a4f739b76be85963eb9fd15d";

                                    $.ajax({
                                        type: "GET",
                                        url: strURL,
                                        dataType: "json",
                                        success: function (data) {


                                            var i;
                                            var credits = "";
                                            for (i = 0; i < 6; i++) {
                                                credits += "<br>" + data.cast[i].name + " as <i>" + data.cast[i].character + "</i>";
                                            }

                                            $("#details").append(credits);

                                            strURL = "https://api.themoviedb.org/3/movie/" + movieID + "/similar?api_key=fe2b5b11a4f739b76be85963eb9fd15d";
                                            $.ajax({
                                                type: "GET",
                                                url: strURL,
                                                dataType: "json",
                                                success: function (data) {


                                                    var i;
                                                    var similar = "<br><br><b>Similar Movies:</b> ";
                                                    for (i = 0; i < 3; i++) {
                                                        if (i == 2) {
                                                            similar += data.results[i].original_title;
                                                        } else {
                                                            similar += data.results[i].original_title + ", ";
                                                        }
                                                    }

                                                    $("#details").append(similar);
                                                },
                                                error: function (req, status, error) {
                                                    alert("error");
                                                }
                                            });
                                        },
                                        error: function (req, status, error) {
                                            alert("error");
                                        }
                                    });


                                },
                                error: function (req, status, error) {
                                    alert("error");
                                }



                            });




                        });



                        $("#display").append(image);
                        $("#display").append('<br>');
                        $("#display").append(movie);
                        $("#display").append('<br>');
                        $("#display").append('<br>');
                        $("#displaybuttons").append(buttonSelect);
                        $("#displaybuttons").append('<br>');


                        if (i < data.results.length - 1) {

                            $("#displaybuttons").append(buttonNext);
                        }

                    },
                    error: function (req, status, error) {
                        $("#alertMovie").html("");
                        $("#alertMovie").append('<br>');
                        $("#alertMovie").append('<div class="alert alert-secondary" role="alert">You must enter a movie to search for!</div >');
                    }

                });
            });

            $("#btnSearchPeople").click(function () {
                $("#display").html("");
                $("#displaybuttons").html("");

                $("#overview").html("");
                $("#details").html("");
                var i = 0;
                var search = $("#txtSearchPeople").val();
                var strURL = "https://api.themoviedb.org/3/search/person?api_key=fe2b5b11a4f739b76be85963eb9fd15d&language=en-US&query=" + search;

                $.ajax({
                    type: "GET",
                    url: strURL,
                    dataType: "json",
                    success: function getPeople(data) {

                        $("#alertMovie").html("");
                        $("#alertTV").html("");
                        $("#alertPeople").html("");
                        var person = "<h5>" + data.results[i].name + "</h5>";

                        if (data.results[i].profile_path == null) {
                            var imageURL = "https://upload.wikimedia.org/wikipedia/commons/f/fc/No_picture_available.png";
                        } else {
                            var imageURL = "https://image.tmdb.org/t/p/w1280" + data.results[i].profile_path;
                        }

                        var image = document.createElement("IMG");
                        image.src = imageURL;
                        image.alt = "No Poster Available";
                        image.class = "bd-placeholder-img card-img-top";
                        var buttonNext = $('<input/>').attr({ type: 'button', name: 'btnNext', value: 'Next Person', class: "btn btn-info" });
                        var buttonSelect = $('<input/>').attr({ type: 'button', name: 'btnViewPersonDetails', value: 'View Details', class: "btn btn-info" });

                        buttonNext.click(function () {
                            i++;
                            $("#display").html("");
                            $("#displaybuttons").html("");
                            getPeople(data);
                        });

                        buttonSelect.click(function () {
                            personID = data.results[i].id;
                            var strURL = "https://api.themoviedb.org/3/person/" + personID + "?api_key=fe2b5b11a4f739b76be85963eb9fd15d&language=en-US";

                            $.ajax({
                                type: "GET",
                                url: strURL,
                                dataType: "json",
                                success: function (data) {
                                    var person = "<h5>" + data.name + "</h5>";

                                    if (data.profile_path == null) {
                                        var imageURL = "https://upload.wikimedia.org/wikipedia/commons/f/fc/No_picture_available.png";
                                    } else {
                                        var imageURL = "https://image.tmdb.org/t/p/w1280" + data.profile_path;
                                    }

                                    var image = document.createElement("IMG");
                                    image.src = imageURL;
                                    image.alt = "No Photo Available";
                                    image.class = "bd-placeholder-img card-img-top";

                                    var description = data.biography;
                                    var birthday = "<br><br><b>Birthday:</b> " + data.birthday;


                                    $("#display").html("");
                                    $("#displaybuttons").html("");
                                    $("#overview").append(image);
                                    $("#overview").append('<br>');
                                    $("#overview").append(person);
                                    $("#details").append(description);
                                    $("#details").append(birthday);
                                    $("#details").append('<br>');

                                    strURL = "https://api.themoviedb.org/3/person/" + personID + "/combined_credits?api_key=fe2b5b11a4f739b76be85963eb9fd15d";

                                    $.ajax({
                                        type: "GET",
                                        url: strURL,
                                        dataType: "json",
                                        success: function (data) {

                                            var i;
                                            var credits = "<br><h5>Known For:</h5>";
                                            for (i = 0; i < 6; i++) {
                                                if (data.cast[i].media_type == "movie") {
                                                    credits += "<i>" + data.cast[i].character + "</i> in <b>" + data.cast[i].title + "</b><br>";
                                                } else {
                                                    credits += "<i>" + data.cast[i].character + "</i> in <b>" + data.cast[i].name + "</b><br>";
                                                }

                                            }

                                            $("#details").append(credits);
                                        },
                                        error: function (req, status, error) {
                                            alert("error");
                                        }
                                    });


                                },
                                error: function (req, status, error) {
                                    alert("error");
                                }



                            });




                        });



                        $("#display").append(image);
                        $("#display").append('<br>');
                        $("#display").append(person);
                        $("#display").append('<br>');
                        $("#display").append('<br>');
                        $("#displaybuttons").append(buttonSelect);
                        $("#displaybuttons").append('<br>');


                        if (i < data.results.length - 1) {

                            $("#displaybuttons").append(buttonNext);
                        }

                    },
                    error: function (req, status, error) {
                        $("#alertPeople").html("");
                        $("#alertPeople").append('<br>');
                        $("#alertPeople").append('<div class="alert alert-secondary" role="alert">You must enter a person to search for!</div >');
                    }

                });
            });

            $("#btnSearchTV").click(function () {
                $("#display").html("");
                $("#displaybuttons").html("");

                $("#overview").html("");
                $("#details").html("");
                var i = 0;
                var search = $("#txtSearchTV").val();
                var strURL = "https://api.themoviedb.org/3/search/tv?api_key=fe2b5b11a4f739b76be85963eb9fd15d&language=en-US&query=" + search;

                $.ajax({
                    type: "GET",
                    url: strURL,
                    dataType: "json",
                    success: function getTV(data) {

                        $("#alertMovie").html("");
                        $("#alertTV").html("");
                        $("#alertPeople").html("");
                        var TV = "<h5>" + data.results[i].name + "</h5>";

                        if (data.results[i].poster_path == null) {
                            var imageURL = "https://underscoremusic.co.uk/site/wp-content/uploads/2014/05/no-poster.jpg";
                        } else {
                            var imageURL = "https://image.tmdb.org/t/p/w1280" + data.results[i].poster_path;
                        }

                        var image = document.createElement("IMG");
                        image.src = imageURL;
                        image.alt = "No Poster Available";
                        image.class = "bd-placeholder-img card-img-top";
                        var buttonNext = $('<input/>').attr({ type: 'button', name: 'btnNext', value: 'Next TV Show', class: "btn btn-info" });
                        var buttonSelect = $('<input/>').attr({ type: 'button', name: 'btnViewTVDetails', value: 'View Details', class: "btn btn-info" });
                        buttonNext.click(function () {
                            i++;
                            $("#display").html("");
                            $("#displaybuttons").html("");
                            getTV(data);
                        });

                        buttonSelect.click(function () {
                            tvID = data.results[i].id;
                            var strURL = "https://api.themoviedb.org/3/tv/" + tvID + "?api_key=fe2b5b11a4f739b76be85963eb9fd15d&language=en-US";

                            $.ajax({
                                type: "GET",
                                url: strURL,
                                dataType: "json",
                                success: function (data) {
                                    var TV = "<h5>" + data.name + "</h5>";

                                    if (data.poster_path == null) {
                                        var imageURL = "https://underscoremusic.co.uk/site/wp-content/uploads/2014/05/no-poster.jpg";
                                    } else {
                                        var imageURL = "https://image.tmdb.org/t/p/w1280" + data.poster_path;
                                    }

                                    var image = document.createElement("IMG");
                                    image.src = imageURL;
                                    image.alt = "No Poster Available";
                                    image.class = "bd-placeholder-img card-img-top";

                                    var description = data.overview;
                                    var genres = "<br><br><b>Genres:</b> ";
                                    var i;
                                    for (i = 0; i < data.genres.length; i++) {
                                        if (i == data.genres.length - 1) {
                                            genres += data.genres[i].name;
                                        } else {
                                            genres += data.genres[i].name + ", ";
                                        }

                                    }

                                    var rating = "Average Rating: " + data.vote_average + " out of 10";


                                    $("#display").html("");
                                    $("#displaybuttons").html("");
                                    $("#overview").append(image);
                                    $("#overview").append('<br>');
                                    $("#overview").append(TV);
                                    $("#details").append(rating);
                                    $("#details").append('<br>');
                                    $("#details").append('<br>');
                                    $("#details").append(description);
                                    $("#details").append(genres);
                                    $("#details").append('<br>');

                                    strURL = "https://api.themoviedb.org/3/tv/" + tvID + "/credits?api_key=fe2b5b11a4f739b76be85963eb9fd15d";

                                    $.ajax({
                                        type: "GET",
                                        url: strURL,
                                        dataType: "json",
                                        success: function (data) {


                                            var i;
                                            var credits = "";
                                            for (i = 0; i < 6; i++) {
                                                credits += "<br>" + data.cast[i].name + " as <i>" + data.cast[i].character + "</i>";
                                            }

                                            $("#details").append(credits);

                                            strURL = "https://api.themoviedb.org/3/tv/" + tvID + "/similar?api_key=fe2b5b11a4f739b76be85963eb9fd15d";
                                            $.ajax({
                                                type: "GET",
                                                url: strURL,
                                                dataType: "json",
                                                success: function (data) {


                                                    var i;
                                                    var similar = "<br><br><b>Similar TV Shows:</b> ";
                                                    for (i = 0; i < 3; i++) {
                                                        if (i == 2) {
                                                            similar += data.results[i].original_name;
                                                        } else {
                                                            similar += data.results[i].original_name + ", ";
                                                        }
                                                    }

                                                    $("#details").append(similar);
                                                },
                                                error: function (req, status, error) {
                                                    alert("error");
                                                }
                                            });
                                        },
                                        error: function (req, status, error) {
                                            alert("error");
                                        }
                                    });


                                },
                                error: function (req, status, error) {
                                    alert("error");
                                }



                            });




                        });



                        $("#display").append(image);
                        $("#display").append('<br>');
                        $("#display").append(TV);
                        $("#display").append('<br>');
                        $("#display").append('<br>');
                        $("#displaybuttons").append(buttonSelect);
                        $("#displaybuttons").append('<br>');


                        if (i < data.results.length - 1) {

                            $("#displaybuttons").append(buttonNext);
                        }

                    },
                    error: function (req, status, error) {
                        $("#alertTV").html("");
                        $("#alertTV").append('<br>');
                        $("#alertTV").append('<div class="alert alert-secondary" role="alert">You must enter a TV show to search for!</div >');
                    }

                });
            });


        });</script>

</body>
</html>